<!DOCTYPE html>
<html>
  <head>
    <title>Route Management</title>
    <link rel='stylesheet' href='/styles/bootstrap.min.css' />
    <link rel='stylesheet' href='/styles/style.css' />
    <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script src="/js/bootstrap.min.js" type="text/javascript"></script>
  </head>
  <body>
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Route Name</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
        {{#routes}}
        <tr>
          <td>{{routename}}</td>
          <td>
            <input id="txtRoute-{{id}}" type="text" placeholder="New route name">
            <button class="btn btn-primary" onclick="updateRouteName({{id}})">Update Route Name</button>
          </td>
        </tr>
        {{/routes}}
      </tbody>
    </table>
    <div class="form-group">
      <div class="col-sm-10 col-sm-offset-2"></div>
    </div>
    <script>
      function updateRouteName(id) {
        var newRouteName = $('#txtRoute-'+id).val();
        if (newRouteName !== "") {
          $.ajax({
            url: '/api/v1/route/'+id,
            type: 'PUT',
            contentType: 'application/json',
            data: JSON.stringify({
              routename: newRouteName
            }),
            success: function(data) {
              console.log("message from server", data);
              $('#txtRoute-'+id).val("");
              location.reload(); // refresh the page to show updated data
            },
            error: function(jqXHR, textStatus, errorThrown) {
              console.log(textStatus, errorThrown);
            }
          });
        } else {
          alert("Please enter a new route name");
        }
      }
    </script>
  </body>
</html>
